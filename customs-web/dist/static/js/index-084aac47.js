import{d as e,u as a,p as l,l as t,r as n,ah as s,a as r,g as o,j as i,y as d,f as u,w as c,i as p,ai as m,X as g,b as v,k as f,Y as h,K as b,E as w,J as y}from"./vendor-78a6dd30.js";import{g as D,_,a as k,u as C,q as x,d as z}from"./taskDialog-8c457273.js";import"./index-30d780dc.js";const j={class:"LogContainer scroll-y"},S={class:"head-container m-1 mr-3 rowSS"},U={class:"filter-item"},Y=b("查询"),N=i("div",{class:"clearfix"},[i("span",null,"巡查指令列表")],-1),P={style:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},V=b("查看详情"),E=b("删除"),A={class:"block columnCC mt-2"},B=e({setup(e){a();const b=l(null),B=l(null),H=l({show:!1}),L=l({}),M=l({page:1,limit:10});t((()=>{T()}));const T=()=>{D(M._rawValue).then((e=>{b.value=e.data.items,B.value=e.data.total})).catch((e=>{}))},q=()=>{M.page=1,T()};function F(){k(L.value).then((e=>{H.value.show=!1,w({message:"新增成功！",type:"success"}),T()}))}function J(){C(L.value.id,L.value).then((e=>{H.value.show=!1,w({message:"更新成功！",type:"success"}),T()}))}return(e,a)=>{const l=n("el-date-picker"),t=n("el-form-item"),D=n("el-button"),k=n("el-form"),C=n("el-table-column"),K=n("el-button-group"),Q=n("el-table"),X=n("el-pagination"),$=n("el-card"),G=s("loading");return r(),o("div",j,[i("div",S,[d(" 查询工具条 "),u(k,{inline:!0,model:M.value,class:"demo-form-inline"},{default:c((()=>[u(t,{label:"发布日期"},{default:c((()=>[d(' <el-input\r\n            v-model="listQuery.declareDate"\r\n            placeholder="发布日期"\r\n            class="filter-item"\r\n            @keyup.enter="handleFilter" clearable\r\n          /> '),u(l,{modelValue:M.value.declareDate,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value.declareDate=e),placeholder:"发布日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),u(t,null,{default:c((()=>[i("span",U,[u(D,{type:"success",icon:p(m),onClick:q},{default:c((()=>[Y])),_:1},8,["icon"]),d(' <el-button type="primary" :icon="Plus" @click="handleAdd">新增</el-button> ')])])),_:1})])),_:1},8,["model"])]),u($,{class:"m-1"},{header:c((()=>[N])),default:c((()=>[g((r(),v(Q,{data:b.value,stripe:"",style:{width:"100%"}},{default:c((()=>[u(C,{fixed:"",type:"index",label:"序号",align:"center"},{default:c((e=>[i("span",null,f((M.value.page-1)*M.value.limit+e.$index+1),1)])),_:1}),u(C,{prop:"declareDate",label:"发布日期",align:"center"}),u(C,{prop:"detail",label:"详情",align:"center"},{default:c((e=>[i("span",P,f(e.row.detail),1)])),_:1}),u(C,{prop:"deptName",label:"责任部门",align:"center"}),u(C,{prop:"startDate",label:"开始日期",align:"center"}),u(C,{prop:"endDate",label:"结束日期",align:"center"}),u(C,{prop:"creatorName",label:"创建人",align:"center"}),u(C,{label:"操作",align:"center","show-overflow-tooltip":"","min-width":"100%"},{default:c((e=>[u(K,null,{default:c((()=>[u(D,{type:"primary",onClick:a=>{return l=e.row,void x(l.id).then((e=>{H.value={show:!0,title:"巡查指令详情",option:"detail"},L.value={id:l.id,declareDate:l.declareDate,detail:l.detail,deptName:l.deptName,startDate:l.startDate,endDate:l.endDate}})).catch((e=>{}));var l}},{default:c((()=>[V])),_:2},1032,["onClick"]),d(' <el-button type="warning" v-if="scope.row.status == 2" @click="changeLevel(scope.row)">修改风险等级</el-button> '),d(' <el-button  type="warning" @click="handleEdit(scope.row)">编辑</el-button> '),u(D,{type:"danger",onClick:a=>{return l=e.row,void y.confirm("是否确认删除该条数据, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{z(l.id).then((e=>{w({message:"删除成功！",type:"success"}),T()})).catch((e=>{}))})).catch((()=>{}));var l}},{default:c((()=>[E])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[G,false]]),i("div",A,[g(u(X,{currentPage:M.value.page,"onUpdate:currentPage":a[1]||(a[1]=e=>M.value.page=e),"page-size":M.value.limit,"onUpdate:page-size":a[2]||(a[2]=e=>M.value.limit=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:q,onCurrentChange:T},null,8,["currentPage","page-size","total"]),[[h,B.value>0]])])])),_:1}),u(_,{"user-dialog":H.value,"form-data":L.value,onUserHandleSubmitAdd:F,onUserHandleSubmitEdit:J},null,8,["user-dialog","form-data"])])}}});export{B as default};
