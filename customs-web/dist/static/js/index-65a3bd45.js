import{d as e,u as a,p as t,l,r as i,ah as o,a as n,g as s,j as r,f as d,w as u,i as c,ag as p,X as g,b as m,k as v,K as f,Y as h,E as w,J as b}from"./vendor-78a6dd30.js";import{p as x}from"./dateTime-1b081a2f.js";import{c as y}from"./index-30d780dc.js";import C from"./dialogNotice-99409435.js";const _={class:"LogContainer scroll-y"},k={class:"head-container m-1 mr-3 rowSS"},j={class:"filter-item"},z=f("新增"),E=r("div",{class:"clearfix"},[r("span",null,"通知公告列表")],-1),A={style:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},L=f("查看详情"),P=f("编辑"),S=f("删除"),T={class:"block columnCC mt-2"},M=e({setup(e){a();const M=t(null),$=t(null),B=t({}),H=t({}),N=t({page:1,limit:10});l((()=>{U()}));const U=()=>{var e;(e=N._rawValue,y({url:"/notice/listPage",method:"get",data:e,bfLoading:!0,isParams:!0,isAlertErrorMsg:!0})).then((e=>{M.value=e.data.data,$.value=e.data.total})).catch((e=>{}))},J=()=>{N.page=1,U()},K=()=>{H.value={show:!0,title:"新增通知公告",option:"add"},B.value={tips:"",title:"",text:""}};function V(){var e;(e=B.value,y({url:"/notice/create",data:e,method:"post",bfLoading:!0,isAlertErrorMsg:!0})).then((e=>{H.value.show=!1,w({message:"新增成功！",type:"success"}),U()}))}function X(){var e,a;(e=B.value.id,a=B.value,y({url:`/notice/update/${e}`,data:a,method:"post",bfLoading:!0,isAlertErrorMsg:!0})).then((e=>{H.value.show=!1,w({message:"更新成功！",type:"success"}),U()}))}const Y=e=>{b.confirm("是否确认删除该条数据, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;(a=e.id,y({url:`/notice/delete/${a}`,method:"get",bfLoading:!0,isAlertErrorMsg:!0})).then((e=>{w({message:"删除成功！",type:"success"}),U()})).catch((e=>{}))})).catch((()=>{}))};return(e,a)=>{const t=i("el-button"),l=i("el-table-column"),w=i("el-button-group"),b=i("el-table"),y=i("el-pagination"),q=i("el-card"),D=o("loading");return n(),s("div",_,[r("div",k,[r("span",j,[d(t,{type:"primary",icon:c(p),onClick:K},{default:u((()=>[z])),_:1},8,["icon"])])]),d(q,{class:"m-1"},{header:u((()=>[E])),default:u((()=>[g((n(),m(b,{data:M.value,stripe:"",style:{width:"100%"}},{default:u((()=>[d(l,{fixed:"",type:"index",label:"序号",align:"center"},{default:u((e=>[r("span",null,v((N.value.page-1)*N.value.limit+e.$index+1),1)])),_:1}),d(l,{prop:"updateTime",label:"发布时间",align:"center"},{default:u((e=>[f(v(c(x)(e.row.updateTime)),1)])),_:1}),d(l,{prop:"tips",label:"通知类型",align:"center"}),d(l,{prop:"title",label:"通知标题",align:"center"},{default:u((e=>[r("span",A,v(e.row.title),1)])),_:1}),d(l,{prop:"creatorName",label:"创建人",align:"center"}),d(l,{label:"操作",align:"center","show-overflow-tooltip":"","min-width":"100%"},{default:u((e=>[d(w,null,{default:u((()=>[d(t,{type:"primary",onClick:a=>{return t=e.row,H.value={show:!0,title:"通知公告详情",option:"detail"},void(B.value={id:t.id,tips:t.tips,title:t.title,text:t.text});var t}},{default:u((()=>[L])),_:2},1032,["onClick"]),d(t,{type:"warning",onClick:a=>{return t=e.row,H.value={show:!0,title:"修改",option:"edit"},void(B.value={id:t.id,tips:t.tips,title:t.title,text:t.text});var t}},{default:u((()=>[P])),_:2},1032,["onClick"]),d(t,{type:"danger",onClick:a=>Y(e.row)},{default:u((()=>[S])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[D,false]]),r("div",T,[g(d(y,{currentPage:N.value.page,"onUpdate:currentPage":a[0]||(a[0]=e=>N.value.page=e),"page-size":N.value.limit,"onUpdate:page-size":a[1]||(a[1]=e=>N.value.limit=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:$.value,onSizeChange:J,onCurrentChange:U},null,8,["currentPage","page-size","total"]),[[h,$.value>0]])])])),_:1}),d(C,{"dialog-notice":H.value,"form-data":B.value,onHandleSubmitAdd:V,onHandleSubmitEdit:X},null,8,["dialog-notice","form-data"])])}}});export{M as default};
