import{d as e,u as a,p as l,l as t,r as i,ah as r,a as o,g as s,j as n,y as u,f as d,w as c,i as m,ai as p,ag as f,X as g,b as v,k as h,K as b,Y as w,E as T,J as y}from"./vendor-78a6dd30.js";import{p as _}from"./dateTime-1b081a2f.js";import k from"./tideDialog-2c1ef790.js";import{c as C}from"./index-30d780dc.js";const x={class:"LogContainer scroll-y"},D={class:"head-container m-1 mr-3 rowSS"},j={class:"filter-item"},z=b("查询"),E=b("新增"),L=n("div",{class:"clearfix"},[n("span",null,"潮汐规律列表")],-1),M=b("编辑"),A=b("删除"),P={class:"block columnCC mt-2"},S=e({setup(e){a();const S=l(null),U=l(null),Y=l({show:!1}),V=l({}),$=l({page:1,limit:10});t((()=>{B()}));const B=()=>{var e;(e=$._rawValue,C({url:"/tide/listPage",method:"get",data:e,bfLoading:!0,isParams:!0,isAlertErrorMsg:!0})).then((e=>{S.value=e.data.items,U.value=e.data.total})).catch((e=>{}))},H=()=>{$.page=1,B()},F=()=>{Y.value={show:!0,title:"新增潮汐",option:"add"},V.value={riseTime:"",fallTime:"",riseTime2:"",fallTime2:""}};function J(){var e;(e=V.value,C({url:"/tide/create",data:e,method:"post",bfLoading:!0,isAlertErrorMsg:!0})).then((e=>{Y.value.show=!1,T({message:"新增成功！",type:"success"}),B()}))}function K(){var e,a;(e=V.value.id,a=V.value,C({url:`/tide/update/${e}`,data:a,method:"post",bfLoading:!0,isAlertErrorMsg:!0})).then((e=>{Y.value.show=!1,T({message:"更新成功！",type:"success"}),B()}))}const N=e=>{y.confirm("是否确认删除该条数据, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;(a=e.id,C({url:`/tide/delete/${a}`,method:"post",bfLoading:!0,isAlertErrorMsg:!0})).then((e=>{T({message:"删除成功！",type:"success"}),B()})).catch((e=>{}))})).catch((()=>{}))};return(e,a)=>{const l=i("el-date-picker"),t=i("el-form-item"),T=i("el-button"),y=i("el-form"),C=i("el-table-column"),Q=i("el-button-group"),X=i("el-table"),q=i("el-pagination"),G=i("el-card"),I=r("loading");return o(),s("div",x,[n("div",D,[u(" 查询工具条 "),d(y,{inline:!0,model:$.value,class:"demo-form-inline"},{default:c((()=>[d(t,{label:"发布日期"},{default:c((()=>[u(' <el-input\r\n            v-model="listQuery.declareDate"\r\n            placeholder="发布日期"\r\n            class="filter-item"\r\n            @keyup.enter="handleFilter" clearable\r\n          /> '),d(l,{modelValue:$.value.declareDate,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.declareDate=e),placeholder:"发布日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),d(t,null,{default:c((()=>[n("span",j,[d(T,{type:"success",icon:m(p),onClick:H},{default:c((()=>[z])),_:1},8,["icon"]),d(T,{type:"primary",icon:m(f),onClick:F},{default:c((()=>[E])),_:1},8,["icon"])])])),_:1})])),_:1},8,["model"])]),d(G,{class:"m-1"},{header:c((()=>[L])),default:c((()=>[g((o(),v(X,{data:S.value,stripe:"",style:{width:"100%"}},{default:c((()=>[d(C,{fixed:"",type:"index",label:"序号",align:"center"},{default:c((e=>[n("span",null,h(($.value.page-1)*$.value.limit+e.$index+1),1)])),_:1}),d(C,{prop:"declareDate",label:"发布日期",align:"center"}),d(C,{prop:"riseTime",label:"涨潮时间",align:"center"},{default:c((e=>[b(h(m(_)(e.row.riseTime)),1)])),_:1}),d(C,{prop:"riseTime2",label:"涨潮时间",align:"center"},{default:c((e=>[b(h(m(_)(e.row.riseTime2)),1)])),_:1}),d(C,{prop:"fallTime",label:"退潮时间",align:"center"},{default:c((e=>[b(h(m(_)(e.row.fallTime)),1)])),_:1}),d(C,{prop:"fallTime2",label:"退潮时间",align:"center"},{default:c((e=>[b(h(m(_)(e.row.fallTime2)),1)])),_:1}),d(C,{prop:"creatorName",label:"创建人",align:"center"}),d(C,{label:"操作",align:"center","show-overflow-tooltip":"","min-width":"100%"},{default:c((e=>[d(Q,null,{default:c((()=>[u(' <el-button type="primary" @click="viewDetail(scope.row)">查看详情</el-button> '),u(' <el-button type="warning" v-if="scope.row.status == 2" @click="changeLevel(scope.row)">修改风险等级</el-button> '),d(T,{type:"warning",onClick:a=>{return l=e.row,Y.value={show:!0,title:"修改潮汐",option:"edit"},void(V.value={id:l.id,riseTime:l.riseTime,fallTime:l.fallTime,riseTime2:l.riseTime2,fallTime2:l.fallTime2});var l}},{default:c((()=>[M])),_:2},1032,["onClick"]),d(T,{type:"danger",onClick:a=>N(e.row)},{default:c((()=>[A])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[I,false]]),n("div",P,[g(d(q,{currentPage:$.value.page,"onUpdate:currentPage":a[1]||(a[1]=e=>$.value.page=e),"page-size":$.value.limit,"onUpdate:page-size":a[2]||(a[2]=e=>$.value.limit=e),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:H,onCurrentChange:B},null,8,["currentPage","page-size","total"]),[[w,U.value>0]])])])),_:1}),d(k,{"user-dialog":Y.value,"form-data":V.value,onUserHandleSubmitAdd:J,onUserHandleSubmitEdit:K},null,8,["user-dialog","form-data"])])}}});export{S as default};
