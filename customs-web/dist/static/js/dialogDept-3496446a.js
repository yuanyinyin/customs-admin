import{d as e,p as l,r as a,a as t,g as d,f as r,w as o,j as u,y as m,F as p,h as i,K as s,b as n}from"./vendor-78a6dd30.js";import{g as f}from"./dept-5dd4a664.js";import{c as h}from"./index-30d780dc.js";const b={class:"dialog-footer"},c=s("确 定"),g=s("取 消"),v=e({props:{dialogDept:{require:!0,default:null,type:Object},formData:{require:!0,default:null,type:Object}},emits:["handleSubmitAdd","handleSubmitEdit"],setup(e,{emit:s}){const v=e,D={multiple:!1,checkStrictly:!0,label:"deptName",value:"id"},V=l({parentId:[{required:!0,message:"请输入上级部门",trigger:"blur"}],deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],orderNum:[{required:!0,message:"请输入排序编号",trigger:"blur"}]}),y=l(null),N=l(null),_=l([]),w=l([]),x=()=>{f().then((e=>{let l=e.data;l.push({id:"0",deptName:"顶级部门"}),y.value=l})),h({url:"/area/queryAll",method:"get"}).then((e=>{_.value=e.data}))},I=()=>{N.value.validate((e=>{if(!e)return!1;"add"===v.dialogDept.option?s("handleSubmitAdd"):s("handleSubmitEdit")}))},q=()=>{v.dialogDept.show=!1,N.value.resetFields()},j=e=>{var l;(l=e,h({url:`/street/queryByArea/${l}`,method:"get"})).then((e=>{w.value=e.data}))};return(l,s)=>{const f=a("el-cascader"),h=a("el-form-item"),v=a("el-input"),k=a("el-option"),U=a("el-select"),S=a("el-input-number"),A=a("el-form"),C=a("el-button"),F=a("el-dialog");return t(),d("div",null,[r(F,{modelValue:e.dialogDept.show,"onUpdate:modelValue":s[5]||(s[5]=l=>e.dialogDept.show=l),title:e.dialogDept.title,width:"40%",center:"",onOpen:x},{footer:o((()=>[u("div",b,[r(C,{type:"primary",onClick:I},{default:o((()=>[c])),_:1}),r(C,{onClick:q},{default:o((()=>[g])),_:1})])])),default:o((()=>[r(A,{ref_key:"refDeptForm",ref:N,model:e.formData,"label-width":"80px",rules:V.value},{default:o((()=>[r(h,{label:"上级部门",prop:"parentId"},{default:o((()=>[r(f,{props:D,modelValue:e.formData.parentId,"onUpdate:modelValue":s[0]||(s[0]=l=>e.formData.parentId=l),options:y.value,clearable:""},null,8,["modelValue","options"])])),_:1}),r(h,{label:"部门名称",prop:"deptName"},{default:o((()=>[r(v,{modelValue:e.formData.deptName,"onUpdate:modelValue":s[1]||(s[1]=l=>e.formData.deptName=l),placeholder:"请输入部门名称",style:{width:"200px"}},null,8,["modelValue"])])),_:1}),r(h,{label:"所在区县",prop:"area"},{default:o((()=>[m(' <el-input v-model="formData.area" placeholder="请输入区县" style="width: 200px"/> '),r(U,{modelValue:e.formData.areaId,"onUpdate:modelValue":s[2]||(s[2]=l=>e.formData.areaId=l),clearable:"",placeholder:"请输入区县",onChange:j,style:{width:"200px"}},{default:o((()=>[(t(!0),d(p,null,i(_.value,(e=>(t(),n(k,{key:e.id,label:e.areaName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(h,{label:"所在街道",prop:"street"},{default:o((()=>[m(' <el-input v-model="formData.street" placeholder="请输入街道(可选)" style="width: 200px"/> '),r(U,{modelValue:e.formData.streetId,"onUpdate:modelValue":s[3]||(s[3]=l=>e.formData.streetId=l),placeholder:"请输入街道(可选)",style:{width:"200px"}},{default:o((()=>[(t(!0),d(p,null,i(w.value,(e=>(t(),n(k,{key:e.id,label:e.streetName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(h,{label:"显示排序",prop:"orderNum"},{default:o((()=>[r(S,{modelValue:e.formData.orderNum,"onUpdate:modelValue":s[4]||(s[4]=l=>e.formData.orderNum=l),"controls-position":"right",min:0},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{v as default};
